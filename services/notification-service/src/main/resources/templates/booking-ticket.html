<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>CineHub - V√© xem phim c·ªßa b·∫°n</title>
  </head>
  <body
    style="
      font-family: Arial, sans-serif;
      background-color: #f8f8f8;
      margin: 0;
      padding: 0;
    "
  >
    <div
      style="
        max-width: 720px;
        margin: 30px auto;
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.05);
      "
    >
      <!-- Header -->
      <div
        style="
          background: #fff;
          padding: 20px 30px;
          border-bottom: 3px solid #a020f0;
        "
      >
        <h1 style="color: #3c1d99; font-size: 24px; margin: 0">
          üé¨ <b style="color: #f0b400">CINE</b
          ><span style="color: #3c1d99">HUB</span> CINEMAS
        </h1>
        <p style="margin: 5px 0 0; font-size: 14px; color: #666">
          X√°c nh·∫≠n ƒë·∫∑t v√© th√†nh c√¥ng!
        </p>
      </div>

      <!-- Info section -->
      <div style="padding: 20px 30px">
        <p style="font-size: 16px">
          Xin ch√†o <b th:text="${userName}">b·∫°n</b> üëã
        </p>
        <p style="font-size: 15px; color: #444">
          B·∫°n ƒë√£ ƒë·∫∑t v√© th√†nh c√¥ng cho phim:
        </p>
        <h2 style="color: #3c1d99; margin: 8px 0" th:text="${movieTitle}">
          MOVIE TITLE
        </h2>

        <table style="width: 100%; font-size: 14px; border-collapse: collapse">
          <tr>
            <td><b>Su·∫•t chi·∫øu:</b></td>
            <td th:text="${showDateTime}">15/02/2025 20:45</td>
          </tr>
          <tr>
            <td><b>Ph√≤ng chi·∫øu:</b></td>
            <td th:text="${roomName}">02</td>
          </tr>
          <tr>
            <td><b>R·∫°p:</b></td>
            <td th:text="${cinemaName}">CineHub B√¨nh D∆∞∆°ng</td>
          </tr>
          <tr>
            <td><b>Thanh to√°n:</b></td>
            <td th:text="${paymentMethod}">ZaloPay</td>
          </tr>
        </table>

        <hr style="margin: 20px 0; border: none; border-top: 1px dashed #ccc" />

        <!-- Seat Table -->
        <h3 style="color: #3c1d99">üéüÔ∏è Th√¥ng tin gh·∫ø</h3>
        <table
          style="
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
            margin-top: 10px;
          "
        >
          <thead>
            <tr style="background: #3c1d99; color: white">
              <th style="padding: 8px; text-align: left">STT</th>
              <th style="padding: 8px">Gh·∫ø</th>
              <th style="padding: 8px">Lo·∫°i</th>
              <th style="padding: 8px">V√©</th>
              <th style="padding: 8px">Gi√° (VNƒê)</th>
            </tr>
          </thead>
          <tbody>
            <tr
              th:each="s, iter : ${seats}"
              th:style="${iter.index % 2 == 0} ? 'background-color:#faf7ff;' : ''"
            >
              <td th:text="${iter.index + 1}" style="padding: 8px">1</td>
              <td th:text="${s.seatName()}" style="padding: 8px">G10</td>
              <td th:text="${s.seatType()}" style="padding: 8px">NORMAL</td>
              <td th:text="${s.ticketType()}" style="padding: 8px">ADULT</td>
              <td
                th:text="${#numbers.formatDecimal(s.price(), 0, 'POINT', 0, 'NONE')}"
                style="padding: 8px; text-align: right"
              >
                45000
              </td>
            </tr>
          </tbody>
        </table>

        <!-- FnB section -->
        <div
          th:if="${fnbs != null and !fnbs.isEmpty()}"
          style="margin-top: 25px"
        >
          <h3 style="color: #3c1d99">üçø ƒê·ªì ƒÉn & th·ª©c u·ªëng</h3>
          <table
            style="width: 100%; border-collapse: collapse; font-size: 14px"
          >
            <thead>
              <tr style="background: #3c1d99; color: white">
                <th style="padding: 8px">STT</th>
                <th style="padding: 8px">S·∫£n ph·∫©m</th>
                <th style="padding: 8px">S·ªë l∆∞·ª£ng</th>
                <th style="padding: 8px">ƒê∆°n gi√° (VNƒê)</th>
              </tr>
            </thead>
            <tbody>
              <tr
                th:each="f, iter : ${fnbs}"
                th:style="${iter.index % 2 == 0} ? 'background-color:#faf7ff;' : ''"
              >
                <td th:text="${iter.index + 1}" style="padding: 8px">1</td>
                <td th:text="${f.itemName()}" style="padding: 8px">Popcorn</td>
                <td th:text="${f.quantity()}" style="padding: 8px">1</td>
                <td
                  th:text="${#numbers.formatDecimal(f.unitPrice(), 0, 'POINT', 0, 'NONE')}"
                  style="padding: 8px; text-align: right"
                >
                  45000
                </td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Rank discount -->
        <div style="margin-top: 25px">
          <h3 style="color: #3c1d99">üéñÔ∏è ∆Øu ƒë√£i th√†nh vi√™n</h3>
          <p><b>H·∫°ng:</b> <span th:text="${rankName}">GOLD</span></p>
          <p>
            Gi·∫£m gi√° t·ª´ h·∫°ng:
            <b
              th:text="${#numbers.formatDecimal(rankDiscountAmount, 0, 'POINT', 0, 'NONE')}"
              >10000</b
            >
            VNƒê
          </p>
        </div>

        <!-- Promotion -->
        <div th:if="${promotion != null}" style="margin-top: 20px">
          <h3 style="color: #3c1d99">üè∑Ô∏è M√£ khuy·∫øn m√£i</h3>
          <p><b>M√£:</b> <span th:text="${promotion.code()}">FIX50K</span></p>
          <p>
            Gi·∫£m gi√°:
            <b
              th:text="${#numbers.formatDecimal(promotion.discountAmount(), 0, 'POINT', 0, 'NONE')}"
              >50000</b
            >
            VNƒê
          </p>
        </div>

        <!-- Bill summary -->
        <div
          style="
            margin-top: 25px;
            text-align: right;
            font-size: 15px;
            line-height: 1.6;
          "
        >
          <p>
            T·ªïng c·ªông:
            <b
              th:text="${#numbers.formatDecimal(totalPrice, 0, 'POINT', 0, 'NONE')}"
              >230000</b
            >
            VNƒê
          </p>
          <p>
            Gi·∫£m gi√° h·∫°ng + m√£:
            <b style="color: #f00"
              >-<span
                th:text="${#numbers.formatDecimal(rankDiscountAmount.add(promotion != null ? promotion.discountAmount() : 0), 0, 'POINT', 0, 'NONE')}"
                >60000</span
              ></b
            >
            VNƒê
          </p>
          <h3 style="color: #3c1d99">
            Th√†nh ti·ªÅn:
            <span
              style="color: #f0b400"
              th:text="${#numbers.formatDecimal(finalPrice, 0, 'POINT', 0, 'NONE')}"
              >170000</span
            >
            VNƒê
          </h3>
        </div>
      </div>

      <!-- Footer -->
      <div
        style="
          background: #f6f2ff;
          border-top: 2px solid #a020f0;
          text-align: center;
          padding: 16px;
        "
      >
        <p style="font-size: 13px; color: #555">
          C·∫£m ∆°n b·∫°n ƒë√£ xem phim t·∫°i
          <b style="color: #a020f0">CineHub</b> üé•<br />
          Ch√∫c b·∫°n c√≥ m·ªôt bu·ªïi xem phim th·∫≠t vui v·∫ª!
        </p>
        <small style="color: #999"
          >ƒê√¢y l√† email t·ª± ƒë·ªông. Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y.</small
        >
      </div>
    </div>
  </body>
</html>
